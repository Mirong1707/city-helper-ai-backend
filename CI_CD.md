# CI/CD —Å GitHub Actions

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –∏ pull request.

## Workflows

### 1. CI Pipeline (`.github/workflows/ci.yml`)

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏:
- Push –≤ `main`, `master`, `develop`
- –°–æ–∑–¥–∞–Ω–∏–∏ Pull Request
- –†—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ (Actions ‚Üí CI ‚Üí Run workflow)

**Jobs:**

#### üîç Lint & Format Check
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ —Å Ruff
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í—Ä–µ–º—è: ~30 —Å–µ–∫—É–Ω–¥

#### ü™ù Pre-commit Hooks
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ pre-commit —Ö—É–∫–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–∞–π–ª—ã, —Å–µ–∫—Ä–µ—Ç—ã, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í—Ä–µ–º—è: ~1 –º–∏–Ω—É—Ç–∞

#### üîí Security Checks
- **Bandit** - –Ω–∞—Ö–æ–¥–∏—Ç —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ –∫–æ–¥–µ
- **Safety** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ CVE
- –í—Ä–µ–º—è: ~30 —Å–µ–∫—É–Ω–¥

#### üèóÔ∏è Build & Test
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –Ω–∞ Python 3.11, 3.12, 3.13
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–º–ø–æ—Ä—Ç—ã
- Smoke test (–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞)
- –í—Ä–µ–º—è: ~1 –º–∏–Ω—É—Ç–∞ –Ω–∞ –≤–µ—Ä—Å–∏—é

**–í—Å–µ–≥–æ: ~3-4 –º–∏–Ω—É—Ç—ã**

### 2. Dependency Review (`.github/workflows/dependency-review.yml`)

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è Pull Requests.

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å —É—è–∑–≤–∏–º–æ—Å—Ç—è–º–∏
- –õ–∏—Ü–µ–Ω–∑–∏–∏ (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
- –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø–∞–∫–µ—Ç—ã
- –û—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ PR —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

### 3. Dependabot (`.github/dependabot.yml`)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
- **Python**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 09:00
- **GitHub Actions**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 09:00
- –°–æ–∑–¥–∞—ë—Ç PR —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
- –ú–∞–∫—Å–∏–º—É–º 10 PR –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. **–°–æ–∑–¥–∞–π –≤–µ—Ç–∫—É:**
   ```bash
   git checkout -b feature/my-feature
   ```

2. **–ü–∏—à–∏ –∫–æ–¥:**
   ```bash
   # –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
   make check
   make run-hooks
   ```

3. **–ó–∞–∫–æ–º–º–∏—Ç—å:**
   ```bash
   git add .
   git commit -m "feat: add new feature"
   # Pre-commit –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç
   ```

4. **–ó–∞–ø—É—à:**
   ```bash
   git push origin feature/my-feature
   ```

5. **–°–æ–∑–¥–∞–π PR:**
   - –ó–∞–π–¥–∏ –Ω–∞ GitHub
   - –°–æ–∑–¥–∞–π Pull Request
   - CI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
   - –î–æ–∂–¥–∏—Å—å ‚úÖ –∑–µ–ª—ë–Ω—ã—Ö –≥–∞–ª–æ—á–µ–∫

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

GitHub ‚Üí Repository ‚Üí Actions

**–ó–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞** ‚úÖ - –≤—Å—ë –æ–∫, –º–æ–∂–Ω–æ –º–µ—Ä–¥–∂–∏—Ç—å
**–ö—Ä–∞—Å–Ω—ã–π –∫—Ä–µ—Å—Ç–∏–∫** ‚ùå - –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å
**–ñ—ë–ª—Ç—ã–π –∫—Ä—É–∂–æ–∫** üü° - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

–ö–ª–∏–∫–Ω–∏ –Ω–∞ workflow ‚Üí –∫–ª–∏–∫–Ω–∏ –Ω–∞ job ‚Üí —Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ CI

GitHub ‚Üí Actions ‚Üí CI ‚Üí Run workflow ‚Üí –≤—ã–±–µ—Ä–∏ –≤–µ—Ç–∫—É ‚Üí Run

–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è:
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –û—Ç–ª–∞–¥–∫–∏ CI
- –ü–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø–æ—Å–ª–µ —Ñ–∏–∫—Å–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ

–ü–µ—Ä–µ–¥ push —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

```bash
# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–∫–∞–∫ –≤ CI)
make check
make run-hooks

# –¢–æ–ª—å–∫–æ –ª–∏–Ω—Ç–µ—Ä
make lint

# –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
make fix

# Pre-commit –Ω–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö
pre-commit run --all-files
```

## –°—Ç–∞—Ç—É—Å—ã –∏ badges

–î–æ–±–∞–≤—å –≤ README –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞:

```markdown
[![CI](https://github.com/USER/REPO/actions/workflows/ci.yml/badge.svg)](https://github.com/USER/REPO/actions/workflows/ci.yml)
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

1. **–°–æ–∑–¥–∞–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub**

2. **–î–æ–±–∞–≤—å —Ñ–∞–π–ª—ã:**
   ```bash
   git add .github/
   git commit -m "ci: add GitHub Actions"
   git push origin main
   ```

3. **–í–∫–ª—é—á–∏ Actions:**
   - GitHub ‚Üí Settings ‚Üí Actions ‚Üí Allow all actions

4. **–ù–∞—Å—Ç—Ä–æ–π Dependabot:**
   - GitHub ‚Üí Settings ‚Üí Security ‚Üí Enable Dependabot

5. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:**
   - –°–¥–µ–ª–∞–π –ª—é–±–æ–π commit
   - CI –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

### CI –ø–∞–¥–∞–µ—Ç –Ω–∞ Lint
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤—å
make fix
git add .
git commit --amend --no-edit
git push --force-with-lease
```

### CI –ø–∞–¥–∞–µ—Ç –Ω–∞ Security
–°–º–æ—Ç—Ä–∏ `bandit-report.json` –≤ Artifacts:
- GitHub ‚Üí Actions ‚Üí —Ç–≤–æ–π workflow ‚Üí Artifacts ‚Üí security-reports

### CI –ø–∞–¥–∞–µ—Ç –Ω–∞ Build
–ü—Ä–æ–≤–µ—Ä—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Python 3.11+:
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π
python run.py
```

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏

CI —É–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω:
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ pip –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ pre-commit hooks
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ jobs
- ‚úÖ Matrix strategy –¥–ª—è Python –≤–µ—Ä—Å–∏–π

–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è: **3-4 –º–∏–Ω—É—Ç—ã**

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**Secrets:**
–ï—Å–ª–∏ –Ω—É–∂–Ω—ã —Å–µ–∫—Ä–µ—Ç—ã (API keys):
- GitHub ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí New secret
- –í workflow: `${{ secrets.SECRET_NAME }}`

**Permissions:**
Workflow –∏–º–µ–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞:
- `contents: read` - —á–∏—Ç–∞—Ç—å –∫–æ–¥
- `pull-requests: write` - –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å PR (dependency review)

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ CI

### –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã (pytest)

–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –≤ `ci.yml`:
```yaml
test:
  name: Run Tests
  runs-on: ubuntu-latest
  steps:
    # ... pytest steps
```

### –î–æ–±–∞–≤–∏—Ç—å coverage

```yaml
- name: Upload coverage to Codecov
  uses: codecov/codecov-action@v4
```

### –î–æ–±–∞–≤–∏—Ç—å deployment

–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π workflow `.github/workflows/deploy.yml`:
```yaml
name: Deploy
on:
  push:
    tags: ['v*']
jobs:
  deploy:
    # ... deployment steps
```

## Troubleshooting

**Workflow –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ñ–∞–π–ª –≤ `.github/workflows/`
- –ü—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å YAML (spaces, not tabs)
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ Actions –≤–∫–ª—é—á–µ–Ω—ã –≤ Settings

**Permission denied:**
- GitHub ‚Üí Settings ‚Üí Actions ‚Üí Workflow permissions ‚Üí Read and write

**–î–æ–ª–≥–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## Best Practices

‚úÖ **DO:**
- –ü—Ä–æ–≤–µ—Ä—è–π –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ push
- –ß–∏—Ç–∞–π –ª–æ–≥–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ commit messages
- Merge —Ç–æ–ª—å–∫–æ —Å –∑–µ–ª—ë–Ω—ã–º–∏ CI

‚ùå **DON'T:**
- –ù–µ –ø—É—à—å –Ω–∞–ø—Ä—è–º—É—é –≤ main (–∏—Å–ø–æ–ª—å–∑—É–π PR)
- –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π –∫—Ä–∞—Å–Ω—ã–µ CI
- –ù–µ –ø—Ä–æ–ø—É—Å–∫–∞–π pre-commit (`--no-verify`)
- –ù–µ —Ö—Ä–∞–Ω–∏ —Å–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ
